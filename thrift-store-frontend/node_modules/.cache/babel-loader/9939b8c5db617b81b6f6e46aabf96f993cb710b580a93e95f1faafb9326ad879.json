{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import'../styles/ProductPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductPage=()=>{const[product,setProduct]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[quantity,setQuantity]=useState(1);const{id}=useParams();const navigate=useNavigate();const{isAuthenticated}=useAuth();useEffect(()=>{const fetchProduct=async()=>{try{setLoading(true);setError(null);// Real API call to fetch product by ID\nconst response=await fetch(`/api/products/${id}`);if(!response.ok){throw new Error('Failed to fetch product');}const data=await response.json();setProduct(data);setLoading(false);}catch(err){setError('Failed to load product details');setLoading(false);}};fetchProduct();},[id]);const handleQuantityChange=e=>{const value=parseInt(e.target.value);if(value>0&&value<=((product===null||product===void 0?void 0:product.stock)||1)){setQuantity(value);}};const addToCart=async()=>{if(!isAuthenticated){navigate('/login',{state:{from:`/products/${id}`}});return;}try{// In a real app, this would be an API call to add to cart\nconsole.log(`Adding ${quantity} of product ${id} to cart`);// Navigate to cart\nnavigate('/cart');}catch(err){setError('Failed to add product to cart');}};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"product-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading product details...\"})]});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"product-error\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Error\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"return-button\",children:\"Return to Home\"})]});}if(!product){return/*#__PURE__*/_jsxs(\"div\",{className:\"product-not-found\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Product Not Found\"}),/*#__PURE__*/_jsx(\"p\",{children:\"The product you're looking for doesn't exist or has been removed.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),className:\"return-button\",children:\"Return to Home\"})]});}const formattedDate=new Date(product.createdAt).toLocaleDateString();return/*#__PURE__*/_jsx(\"div\",{className:\"product-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"product-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-gallery\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.name,className:\"product-main-image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"product-thumbnails\",children:product.images&&product.images.map((image,index)=>/*#__PURE__*/_jsx(\"img\",{src:image,alt:`${product.name} view ${index+1}`,className:\"product-thumbnail\"},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-details\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"product-name\",children:product.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-price\",children:[\"$\",product.price.toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"product-condition\",children:[\"Condition: \",product.condition]}),/*#__PURE__*/_jsxs(\"span\",{className:\"product-category\",children:[\"Category: \",product.category]}),/*#__PURE__*/_jsxs(\"span\",{className:\"product-seller\",children:[\"Seller: \",product.seller.name]}),/*#__PURE__*/_jsxs(\"span\",{className:\"product-listing-date\",children:[\"Listed on: \",formattedDate]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-description\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{children:product.description})]}),product.features&&product.features.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"product-features\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Features\"}),/*#__PURE__*/_jsx(\"ul\",{children:product.features.map((feature,index)=>/*#__PURE__*/_jsx(\"li\",{children:feature},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-actions\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-selector\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"quantity\",children:\"Quantity:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"quantity\",min:\"1\",max:product.stock,value:quantity,onChange:handleQuantityChange}),/*#__PURE__*/_jsx(\"span\",{className:\"stock-info\",children:product.stock>0?`${product.stock} available`:'Out of stock'})]}),/*#__PURE__*/_jsx(\"button\",{onClick:addToCart,className:\"add-to-cart-button\",disabled:product.stock<1,children:\"Add to Cart\"})]})]})]})});};export default ProductPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","ProductPage","product","setProduct","loading","setLoading","error","setError","quantity","setQuantity","id","navigate","isAuthenticated","fetchProduct","response","fetch","ok","Error","data","json","err","handleQuantityChange","e","value","parseInt","target","stock","addToCart","state","from","console","log","className","children","onClick","formattedDate","Date","createdAt","toLocaleDateString","src","imageUrl","alt","name","images","map","image","index","price","toFixed","condition","category","seller","description","features","length","feature","htmlFor","type","min","max","onChange","disabled"],"sources":["/Volumes/CrucialSSD/Dell Laptop/A Drive/Thrift store/Thrift store/thrift-store-frontend/src/pages/ProductPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport '../styles/ProductPage.css';\r\n\r\nconst ProductPage = () => {\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [quantity, setQuantity] = useState(1);\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { isAuthenticated } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const fetchProduct = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        \r\n        // Real API call to fetch product by ID\r\n        const response = await fetch(`/api/products/${id}`);\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch product');\r\n        }\r\n        const data = await response.json();\r\n        setProduct(data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setError('Failed to load product details');\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProduct();\r\n  }, [id]);\r\n\r\n  const handleQuantityChange = (e) => {\r\n    const value = parseInt(e.target.value);\r\n    if (value > 0 && value <= (product?.stock || 1)) {\r\n      setQuantity(value);\r\n    }\r\n  };\r\n\r\n  const addToCart = async () => {\r\n    if (!isAuthenticated) {\r\n      navigate('/login', { state: { from: `/products/${id}` } });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // In a real app, this would be an API call to add to cart\r\n      console.log(`Adding ${quantity} of product ${id} to cart`);\r\n      \r\n      // Navigate to cart\r\n      navigate('/cart');\r\n    } catch (err) {\r\n      setError('Failed to add product to cart');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"product-loading\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Loading product details...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"product-error\">\r\n        <h2>Error</h2>\r\n        <p>{error}</p>\r\n        <button onClick={() => navigate('/')} className=\"return-button\">\r\n          Return to Home\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return (\r\n      <div className=\"product-not-found\">\r\n        <h2>Product Not Found</h2>\r\n        <p>The product you're looking for doesn't exist or has been removed.</p>\r\n        <button onClick={() => navigate('/')} className=\"return-button\">\r\n          Return to Home\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const formattedDate = new Date(product.createdAt).toLocaleDateString();\r\n\r\n  return (\r\n    <div className=\"product-page\">\r\n      <div className=\"product-container\">\r\n        <div className=\"product-gallery\">\r\n          <img \r\n            src={product.imageUrl} \r\n            alt={product.name} \r\n            className=\"product-main-image\" \r\n          />\r\n          <div className=\"product-thumbnails\">\r\n            {product.images && product.images.map((image, index) => (\r\n              <img \r\n                key={index}\r\n                src={image}\r\n                alt={`${product.name} view ${index + 1}`}\r\n                className=\"product-thumbnail\"\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"product-details\">\r\n          <h1 className=\"product-name\">{product.name}</h1>\r\n          \r\n          <div className=\"product-price\">${product.price.toFixed(2)}</div>\r\n          \r\n          <div className=\"product-meta\">\r\n            <span className=\"product-condition\">Condition: {product.condition}</span>\r\n            <span className=\"product-category\">Category: {product.category}</span>\r\n            <span className=\"product-seller\">Seller: {product.seller.name}</span>\r\n            <span className=\"product-listing-date\">Listed on: {formattedDate}</span>\r\n          </div>\r\n          \r\n          <div className=\"product-description\">\r\n            <h3>Description</h3>\r\n            <p>{product.description}</p>\r\n          </div>\r\n          \r\n          {product.features && product.features.length > 0 && (\r\n            <div className=\"product-features\">\r\n              <h3>Features</h3>\r\n              <ul>\r\n                {product.features.map((feature, index) => (\r\n                  <li key={index}>{feature}</li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          )}\r\n          \r\n          <div className=\"product-actions\">\r\n            <div className=\"quantity-selector\">\r\n              <label htmlFor=\"quantity\">Quantity:</label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"quantity\"\r\n                min=\"1\"\r\n                max={product.stock}\r\n                value={quantity}\r\n                onChange={handleQuantityChange}\r\n              />\r\n              <span className=\"stock-info\">\r\n                {product.stock > 0 \r\n                  ? `${product.stock} available` \r\n                  : 'Out of stock'}\r\n              </span>\r\n            </div>\r\n            \r\n            <button \r\n              onClick={addToCart}\r\n              className=\"add-to-cart-button\"\r\n              disabled={product.stock < 1}\r\n            >\r\n              Add to Cart\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}